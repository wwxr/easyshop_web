(function(k){function F(i,g,l){return"rgba("+[Math.round(i[0]+(g[0]-i[0])*l),Math.round(i[1]+(g[1]-i[1])*l),Math.round(i[2]+(g[2]-i[2])*l),i[3]+(g[3]-i[3])*l].join(",")+")"}var E=function(){},d=k.getOptions(),j=k.each,c=k.extend,B=k.format,A=k.pick,b=k.wrap,h=k.Chart,e=k.seriesTypes,D=e.pie,f=e.column,C=HighchartsAdapter.fireEvent,w=HighchartsAdapter.inArray;c(d.lang,{drillUpText:"‚óÅ Back to {series.name}"});d.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};k.SVGRenderer.prototype.Element.prototype.fadeIn=function(g){this.attr({opacity:0.1,visibility:"inherit"}).animate({opacity:A(this.newOpacity,1)},g||{duration:250})};h.prototype.addSeriesAsDrilldown=function(i,g){this.addSingleSeriesAsDrilldown(i,g);this.applyDrilldown()};h.prototype.addSingleSeriesAsDrilldown=function(s,r){var p=s.series,q=p.xAxis,n=p.yAxis,l;l=s.color||p.color;var o,t=[],m=[],i;i=p.levelNumber||0;r=c({color:l},r);o=w(s,p.points);j(p.chart.series,function(g){if(g.xAxis===q){t.push(g),m.push(g.userOptions),g.levelNumber=g.levelNumber||0}});l={levelNumber:i,seriesOptions:p.userOptions,levelSeriesOptions:m,levelSeries:t,shapeArgs:s.shapeArgs,bBox:s.graphic.getBBox(),color:l,lowerSeriesOptions:r,pointOptions:p.options.data[o],pointIndex:o,oldExtremes:{xMin:q&&q.userMin,xMax:q&&q.userMax,yMin:n&&n.userMin,yMax:n&&n.userMax}};if(!this.drilldownLevels){this.drilldownLevels=[]}this.drilldownLevels.push(l);l=l.lowerSeries=this.addSeries(r,!1);l.levelNumber=i+1;if(q){q.oldPos=q.pos,q.userMin=q.userMax=null,n.userMin=n.userMax=null}if(p.type===l.type){l.animate=l.animateDrilldown||E,l.options.animation=!0}};h.prototype.applyDrilldown=function(){var i=this.drilldownLevels,g=i[i.length-1].levelNumber;j(this.drilldownLevels,function(l){l.levelNumber===g&&j(l.levelSeries,function(m){m.levelNumber===g&&m.remove(!1)})});this.redraw();this.showDrillUpButton()};h.prototype.getDrilldownBackText=function(){var g=this.drilldownLevels[this.drilldownLevels.length-1];g.series=g.seriesOptions;return B(this.options.lang.drillUpText,g)};h.prototype.showDrillUpButton=function(){var i=this,g=this.getDrilldownBackText(),m=i.options.drilldown.drillUpButton,n,l;this.drillUpButton?this.drillUpButton.attr({text:g}).align():(l=(n=m.theme)&&n.states,this.drillUpButton=this.renderer.button(g,null,null,function(){i.drillUp()},n,l&&l.hover,l&&l.select).attr({align:m.position.align,zIndex:9}).add().align(m.position,!1,m.relativeTo||"plotBox"))};h.prototype.drillUp=function(){for(var v=this,u=v.drilldownLevels,s=u[u.length-1].levelNumber,t=u.length,q=v.series,o=q.length,r,p,n,m,i=function(g){var l;j(q,function(x){x.userOptions===g&&(l=x)});l=l||v.addSeries(g,!1);if(l.type===p.type&&l.animateDrillupTo){l.animate=l.animateDrillupTo}g===r.seriesOptions&&(n=l)};t--;){if(r=u[t],r.levelNumber===s){u.pop();p=r.lowerSeries;if(!p.chart){for(;o--;){if(q[o].options.id===r.lowerSeriesOptions.id){p=q[o];break}}}p.xData=[];j(r.levelSeriesOptions,i);C(v,"drillup",{seriesOptions:r.seriesOptions});if(n.type===p.type){n.drilldownLevel=r,n.options.animation=v.options.drilldown.animation,p.animateDrillupFrom&&p.animateDrillupFrom(r)}n.levelNumber=s;p.remove(!1);if(n.xAxis){m=r.oldExtremes,n.xAxis.setExtremes(m.xMin,m.xMax,!1),n.yAxis.setExtremes(m.yMin,m.yMax,!1)}}}this.redraw();this.drilldownLevels.length===0?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align()};f.prototype.supportsDrilldown=!0;f.prototype.animateDrillupTo=function(i){if(!i){var g=this,l=g.drilldownLevel;j(this.points,function(m){m.graphic.hide();m.dataLabel&&m.dataLabel.hide();m.connector&&m.connector.hide()});setTimeout(function(){j(g.points,function(n,m){var o=m===(l&&l.pointIndex)?"show":"fadeIn",p=o==="show"?!0:void 0;n.graphic[o](p);if(n.dataLabel){n.dataLabel[o](p)}if(n.connector){n.connector[o](p)}})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=E}};f.prototype.animateDrilldown=function(i){var g=this,m=this.chart.drilldownLevels,n=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1].shapeArgs,l=this.chart.options.drilldown.animation;if(!i){j(m,function(o){if(g.userOptions===o.lowerSeriesOptions){n=o.shapeArgs}}),n.x+=this.xAxis.oldPos-this.xAxis.pos,j(this.points,function(o){o.graphic&&o.graphic.attr(n).animate(o.shapeArgs,l);o.dataLabel&&o.dataLabel.fadeIn(l)}),this.animate=null}};f.prototype.animateDrillupFrom=function(i){var g=this.chart.options.drilldown.animation,l=this.group,m=this;j(m.trackerGroups,function(n){if(m[n]){m[n].on("mouseover")}});delete this.group;j(this.points,function(r){var p=r.graphic,q=k.Color(r.color).rgba,o=k.Color(i.color).rgba,n=function(){p.destroy();l&&(l=l.destroy())};p&&(delete r.graphic,g?p.animate(i.shapeArgs,k.merge(g,{step:function(t,s){s.prop==="start"&&q.length===4&&o.length===4&&this.attr({fill:F(q,o,s.pos)})},complete:n})):(p.attr(i.shapeArgs),n()))})};D&&c(D.prototype,{supportsDrilldown:!0,animateDrillupTo:f.prototype.animateDrillupTo,animateDrillupFrom:f.prototype.animateDrillupFrom,animateDrilldown:function(i){var g=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],o=this.chart.options.drilldown.animation,p=g.shapeArgs,m=p.start,l=(p.end-m)/this.points.length,n=k.Color(g.color).rgba;if(!i){j(this.points,function(r,q){var s=k.Color(r.color).rgba;r.graphic.attr(k.merge(p,{start:m+q*l,end:m+(q+1)*l}))[o?"animate":"attr"](r.shapeArgs,k.merge(o,{step:function(u,t){t.prop==="start"&&n.length===4&&s.length===4&&this.attr({fill:F(n,s,t.pos)})}}))}),this.animate=null}}});k.Point.prototype.doDrilldown=function(i){for(var g=this.series.chart,m=g.options.drilldown,n=(m.series||[]).length,l;n--&&!l;){m.series[n].id===this.drilldown&&(l=m.series[n])}C(g,"drilldown",{point:this,seriesOptions:l});l&&(i?g.addSingleSeriesAsDrilldown(this,l):g.addSeriesAsDrilldown(this,l))};b(k.Point.prototype,"init",function(i,g,o,p){var m=i.call(this,g,o,p),l=g.chart,n=(i=g.xAxis&&g.xAxis.ticks[p])&&i.label;if(m.drilldown){if(k.addEvent(m,"click",function(){m.doDrilldown()}),n){if(!n._basicStyle){n._basicStyle=n.element.getAttribute("style")}n.addClass("highcharts-drilldown-axis-label").css(l.options.drilldown.activeAxisLabelStyle).on("click",function(){j(n.ddPoints,function(q){q.doDrilldown&&q.doDrilldown(!0)});l.applyDrilldown()});if(!n.ddPoints){n.ddPoints=[]}n.ddPoints.push(m)}}else{n&&n._basicStyle&&n.element.setAttribute("style",n._basicStyle)}return m});b(k.Series.prototype,"drawDataLabels",function(i){var g=this.chart.options.drilldown.activeDataLabelStyle;i.call(this);j(this.points,function(l){if(l.drilldown&&l.dataLabel){l.dataLabel.attr({"class":"highcharts-drilldown-data-label"}).css(g).on("click",function(){l.doDrilldown()})}})});var a,d=function(g){g.call(this);j(this.points,function(i){i.drilldown&&i.graphic&&i.graphic.attr({"class":"highcharts-drilldown-point"}).css({cursor:"pointer"})})};for(a in e){e[a].prototype.supportsDrilldown&&b(e[a].prototype,"drawTracker",d)}})(Highcharts);