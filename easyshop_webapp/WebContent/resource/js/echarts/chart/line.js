define("echarts/chart/line",["require","../component/base","./base","zrender/shape/BrokenLine","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(q){function w(l,d,a,m,h){f.call(this,l,d,a,m,h),v.call(this),this.refresh(m)}function k(E,I,C){var z=I.x,H=I.y,y=I.width,J=I.height,B=J/2;I.symbol.match("empty")&&(E.fillStyle="#fff"),I.brushType="both";var D=I.symbol.replace("empty","").toLowerCase();D.match("star")?(B=D.replace("star","")-0||5,H-=1,D="star"):("rectangle"===D||"arrow"===D)&&(z+=(y-J)/2,y=J);var F="";if(D.match("image")&&(F=D.replace(new RegExp("^image:\\/\\/"),""),D="image",z+=Math.round((y-J)/2)-1,y=J+=2),D=b.prototype.iconLibrary[D]){var A=I.x,G=I.y;E.moveTo(A,G+B),E.lineTo(A+5,G+B),E.moveTo(A+I.width-5,G+B),E.lineTo(A+I.width,G+B);var r=this;D(E,{x:z+4,y:H+4,width:y-8,height:J-8,n:B,image:F},function(){r.modSelf(),C()})}else{E.moveTo(z,H+B),E.lineTo(z+y,H+B)}}var f=q("../component/base"),v=q("./base"),c=q("zrender/shape/BrokenLine"),b=q("../util/shape/Icon"),x=q("../util/shape/HalfSmoothPolygon");q("../component/axis"),q("../component/grid"),q("../component/dataZoom");var j=q("../config"),p=q("../util/ecData"),u=q("zrender/tool/util"),g=q("zrender/tool/color");return w.prototype={type:j.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._bulidPosition()},_buildHorizontal:function(Z,I,S,O){for(var ad,N,K,J,Q,T,aa,P,ab,M,H=this.series,A=S[0][0],B=H[A],D=B.xAxisIndex,X=this.component.xAxis.getAxis(D),Y={},ac=0,ae=I;ae>ac&&null!=X.getNameByIndex(ac);ac++){K=X.getCoordByIndex(ac);for(var E=0,R=S.length;R>E;E++){ad=H[S[E][0]].yAxisIndex||0,N=this.component.yAxis.getAxis(ad),T=Q=P=aa=N.getCoord(0);for(var C=0,G=S[E].length;G>C;C++){A=S[E][C],B=H[A],ab=B.data[ac],M=null!=ab?null!=ab.value?ab.value:ab:"-",Y[A]=Y[A]||[],O[A]=O[A]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==M?(M>=0?(Q-=C>0?N.getCoordSize(M):T-N.getCoord(M),J=Q):0>M&&(aa+=C>0?N.getCoordSize(M):N.getCoord(M)-P,J=aa),Y[A].push([K,J,ac,X.getNameByIndex(ac),K,T]),O[A].min>M&&(O[A].min=M,O[A].minY=J,O[A].minX=K),O[A].max<M&&(O[A].max=M,O[A].maxY=J,O[A].maxX=K),O[A].sum+=M,O[A].counter++):Y[A].length>0&&(this.finalPLMap[A]=this.finalPLMap[A]||[],this.finalPLMap[A].push(Y[A]),Y[A]=[])}}Q=this.component.grid.getY();for(var z,E=0,R=S.length;R>E;E++){for(var C=0,G=S[E].length;G>C;C++){A=S[E][C],B=H[A],ab=B.data[ac],M=null!=ab?null!=ab.value?ab.value:ab:"-","-"==M&&this.deepQuery([ab,B,this.option],"calculable")&&(z=this.deepQuery([ab,B],"symbolSize"),Q+=2*z+5,J=Q,this.shapeList.push(this._getCalculableItem(A,ac,X.getNameByIndex(ac),K,J,"horizontal")))}}}for(var F in Y){Y[F].length>0&&(this.finalPLMap[F]=this.finalPLMap[F]||[],this.finalPLMap[F].push(Y[F]),Y[F]=[])}this._calculMarkMapXY(O,S,"y"),this._buildBorkenLine(Z,this.finalPLMap,X,"horizontal")},_buildVertical:function(Z,I,S,O){for(var ad,N,K,J,Q,T,aa,P,ab,M,H=this.series,A=S[0][0],B=H[A],D=B.yAxisIndex,X=this.component.yAxis.getAxis(D),Y={},ac=0,ae=I;ae>ac&&null!=X.getNameByIndex(ac);ac++){J=X.getCoordByIndex(ac);for(var E=0,R=S.length;R>E;E++){ad=H[S[E][0]].xAxisIndex||0,N=this.component.xAxis.getAxis(ad),T=Q=P=aa=N.getCoord(0);for(var C=0,G=S[E].length;G>C;C++){A=S[E][C],B=H[A],ab=B.data[ac],M=null!=ab?null!=ab.value?ab.value:ab:"-",Y[A]=Y[A]||[],O[A]=O[A]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==M?(M>=0?(Q+=C>0?N.getCoordSize(M):N.getCoord(M)-T,K=Q):0>M&&(aa-=C>0?N.getCoordSize(M):P-N.getCoord(M),K=aa),Y[A].push([K,J,ac,X.getNameByIndex(ac),T,J]),O[A].min>M&&(O[A].min=M,O[A].minX=K,O[A].minY=J),O[A].max<M&&(O[A].max=M,O[A].maxX=K,O[A].maxY=J),O[A].sum+=M,O[A].counter++):Y[A].length>0&&(this.finalPLMap[A]=this.finalPLMap[A]||[],this.finalPLMap[A].push(Y[A]),Y[A]=[])}}Q=this.component.grid.getXend();for(var z,E=0,R=S.length;R>E;E++){for(var C=0,G=S[E].length;G>C;C++){A=S[E][C],B=H[A],ab=B.data[ac],M=null!=ab?null!=ab.value?ab.value:ab:"-","-"==M&&this.deepQuery([ab,B,this.option],"calculable")&&(z=this.deepQuery([ab,B],"symbolSize"),Q-=2*z+5,K=Q,this.shapeList.push(this._getCalculableItem(A,ac,X.getNameByIndex(ac),K,J,"vertical")))}}}for(var F in Y){Y[F].length>0&&(this.finalPLMap[F]=this.finalPLMap[F]||[],this.finalPLMap[F].push(Y[F]),Y[F]=[])}this._calculMarkMapXY(O,S,"x"),this._buildBorkenLine(Z,this.finalPLMap,X,"vertical")},_buildOther:function(R,E,N,J){for(var X,I,G=this.series,F={},L=0,O=N.length;O>L;L++){for(var S=0,K=N[L].length;K>S;S++){var T=N[L][S],H=G[T],D=H.xAxisIndex||0;X=this.component.xAxis.getAxis(D);var z=H.yAxisIndex||0;I=this.component.yAxis.getAxis(z);var A=I.getCoord(0);F[T]=F[T]||[],J[T]=J[T]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var B=0,P=H.data.length;P>B;B++){var Q=H.data[B],W=null!=Q?null!=Q.value?Q.value:Q:"-";if(W instanceof Array){var Y=X.getCoord(W[0]),C=I.getCoord(W[1]);F[T].push([Y,C,B,W[0],Y,A]),J[T].min0>W[0]&&(J[T].min0=W[0],J[T].minY0=C,J[T].minX0=Y),J[T].max0<W[0]&&(J[T].max0=W[0],J[T].maxY0=C,J[T].maxX0=Y),J[T].sum0+=W[0],J[T].counter0++,J[T].min1>W[1]&&(J[T].min1=W[1],J[T].minY1=C,J[T].minX1=Y),J[T].max1<W[1]&&(J[T].max1=W[1],J[T].maxY1=C,J[T].maxX1=Y),J[T].sum1+=W[1],J[T].counter1++}}}}for(var M in F){F[M].length>0&&(this.finalPLMap[M]=this.finalPLMap[M]||[],this.finalPLMap[M].push(F[M]),F[M]=[])}this._calculMarkMapXY(J,N,"xy"),this._buildBorkenLine(R,this.finalPLMap,X,"other")},_buildBorkenLine:function(Y,H,Q,N){for(var ab,J="other"==N?"horizontal":N,O=this.series,Z=Y.length-1;Z>=0;Z--){var M=Y[Z],G=O[M],m=H[M];if(G.type===this.type&&null!=m){for(var o=this._getBbox(M,J),B=this._sIndex2ColorMap[M],R=this.query(G,"itemStyle.normal.lineStyle.width"),T=this.query(G,"itemStyle.normal.lineStyle.type"),aa=this.query(G,"itemStyle.normal.lineStyle.color"),ac=this.getItemStyleColor(this.query(G,"itemStyle.normal.color"),M,-1),D=null!=this.query(G,"itemStyle.normal.areaStyle"),P=this.query(G,"itemStyle.normal.areaStyle.color"),z=0,F=m.length;F>z;z++){var h=m[z],E="other"!=N&&this._isLarge(J,h);if(E){h=this._getLargePointList(J,h)}else{for(var d=0,C=h.length;C>d;d++){ab=G.data[h[d][2]],(this.deepQuery([ab,G,this.option],"calculable")||this.deepQuery([ab,G],"showAllSymbol")||"categoryAxis"===Q.type&&Q.isMainAxis(h[d][2])&&"none"!=this.deepQuery([ab,G],"symbol"))&&this.shapeList.push(this._getSymbol(M,h[d][2],h[d][3],h[d][0],h[d][1],J))}}var A=new c({zlevel:this._zlevelBase,style:{miterLimit:R,pointList:h,strokeColor:aa||ac||B,lineWidth:R,lineType:T,smooth:this._getSmooth(G.smooth),smoothConstraint:o,shadowColor:this.query(G,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(G,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(G,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(G,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:M,_orient:J});if(p.pack(A,O[M],M,0,z,O[M].name),this.shapeList.push(A),D){var s=new x({zlevel:this._zlevelBase,style:{miterLimit:R,pointList:u.clone(h).concat([[h[h.length-1][4],h[h.length-1][5]],[h[0][4],h[0][5]]]),brushType:"fill",smooth:this._getSmooth(G.smooth),smoothConstraint:o,color:P?P:g.alpha(B,0.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:M,_orient:J});p.pack(s,O[M],M,0,z,O[M].name),this.shapeList.push(s)}}}}},_getBbox:function(h,d){var a=this.component.grid.getBbox(),l=this.xMarkMap[h];return null!=l.minX0?[[Math.min(l.minX0,l.maxX0,l.minX1,l.maxX1),Math.min(l.minY0,l.maxY0,l.minY1,l.maxY1)],[Math.max(l.minX0,l.maxX0,l.minX1,l.maxX1),Math.max(l.minY0,l.maxY0,l.minY1,l.maxY1)]]:("horizontal"===d?(a[0][1]=Math.min(l.minY,l.maxY),a[1][1]=Math.max(l.minY,l.maxY)):(a[0][0]=Math.min(l.minX,l.maxX),a[1][0]=Math.max(l.minX,l.maxX)),a)},_isLarge:function(d,a){return a.length<2?!1:"horizontal"===d?Math.abs(a[0][0]-a[1][0])<0.5:Math.abs(a[0][1]-a[1][1])<0.5},_getLargePointList:function(m,l){var h;h="horizontal"===m?this.component.grid.getWidth():this.component.grid.getHeight();for(var s=l.length,d=[],r=0;h>r;r++){d[r]=l[Math.floor(s/h*r)]}return d},_getSmooth:function(a){return a?0.3:0},_getCalculableItem:function(A,C,z,m,B,h){var d=this.series,D=d[A].calculableHolderColor||this.ecTheme.calculableHolderColor,y=this._getSymbol(A,C,z,m,B,h);return y.style.color=D,y.style.strokeColor=D,y.rotation=[0,0],y.hoverable=!1,y.draggable=!1,y.style.text=void 0,y},_getSymbol:function(C,E,A,y,D,m){var d=this.series,F=d[C],z=F.data[E],B=this.getSymbolShape(F,C,z,E,A,y,D,this._sIndex2ShapeMap[C],this._sIndex2ColorMap[C],"#fff","vertical"===m?"horizontal":"vertical");return B.zlevel=this._zlevelBase+1,this.deepQuery([z,F,this.option],"calculable")&&(this.setCalculable(B),B.draggable=!0),B},getMarkCoord:function(s,l){var h=this.series[s],z=this.xMarkMap[s],d=this.component.xAxis.getAxis(h.xAxisIndex),y=this.component.yAxis.getAxis(h.yAxisIndex);if(l.type&&("max"===l.type||"min"===l.type||"average"===l.type)){var m=null!=l.valueIndex?l.valueIndex:null!=z.maxX0?"1":"";return[z[l.type+"X"+m],z[l.type+"Y"+m],z[l.type+"Line"+m],z[l.type+m]]}return["string"!=typeof l.xAxis&&d.getCoordByIndex?d.getCoordByIndex(l.xAxis||0):d.getCoord(l.xAxis||0),"string"!=typeof l.yAxis&&y.getCoordByIndex?y.getCoordByIndex(l.yAxis||0):y.getCoord(l.yAxis||0)]},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(D,G){for(var B,z,F=D.seriesIndex,y=D.dataIndex,m=F.length;m--;){if(B=this.finalPLMap[F[m]]){for(var H=0,A=B.length;A>H;H++){z=B[H];for(var C=0,E=z.length;E>C;C++){y===z[C][2]&&G.push(this._getSymbol(F[m],z[C][2],z[C][3],z[C][0],z[C][1],"horizontal"))}}}}},addDataAnimation:function(G){for(var K=this.series,E={},B=0,J=G.length;J>B;B++){E[G[B][0]]=G[B]}for(var A,y,L,D,F,H,C,B=this.shapeList.length-1;B>=0;B--){if(F=this.shapeList[B]._seriesIndex,E[F]&&!E[F][3]){if(this.shapeList[B]._main&&this.shapeList[B].style.pointList.length>1){if(H=this.shapeList[B].style.pointList,y=Math.abs(H[0][0]-H[1][0]),D=Math.abs(H[0][1]-H[1][1]),C="horizontal"===this.shapeList[B]._orient,E[F][2]){if("half-smooth-polygon"===this.shapeList[B].type){var I=H.length;this.shapeList[B].style.pointList[I-3]=H[I-2],this.shapeList[B].style.pointList[I-3][C?0:1]=H[I-4][C?0:1],this.shapeList[B].style.pointList[I-2]=H[I-1]}this.shapeList[B].style.pointList.pop(),C?(A=y,L=0):(A=0,L=-D)}else{if(this.shapeList[B].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[B].type){var z=this.shapeList[B].style.pointList.pop();C?z[0]=H[0][0]:z[1]=H[0][1],this.shapeList[B].style.pointList.push(z)}C?(A=-y,L=0):(A=0,L=D)}this.zr.modShape(this.shapeList[B].id,{style:{pointList:this.shapeList[B].style.pointList}},!0)}else{if(E[F][2]&&this.shapeList[B]._dataIndex===K[F].data.length-1){this.zr.delShape(this.shapeList[B].id);continue}if(!E[F][2]&&0===this.shapeList[B]._dataIndex){this.zr.delShape(this.shapeList[B].id);continue}}this.shapeList[B].position=[0,0],this.zr.animate(this.shapeList[B].id,"").when(500,{position:[A,L]}).start()}}}},b.prototype.iconLibrary.legendLineIcon=k,u.inherits(w,v),u.inherits(w,f),q("../chart").define("line",w),w}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(f){function d(a){c.call(this,a)}var c=f("zrender/shape/Base"),g=f("zrender/shape/util/smoothBezier"),b=f("zrender/tool/util");return d.prototype={type:"half-smooth-polygon",buildPath:function(u,m){var q=m.pointList;if(!(q.length<2)){if(m.smooth){var j=g(q.slice(0,-2),m.smooth,!1,m.smoothConstraint);u.moveTo(q[0][0],q[0][1]);for(var e,v,k,n=q.length,p=0;n-3>p;p++){e=j[2*p],v=j[2*p+1],k=q[p+1],u.bezierCurveTo(e[0],e[1],v[0],v[1],k[0],k[1])}u.lineTo(q[n-2][0],q[n-2][1]),u.lineTo(q[n-1][0],q[n-1][1]),u.lineTo(q[0][0],q[0][1])}else{f("zrender/shape/Polygon").prototype.buildPath(u,m)}}}},b.inherits(d,c),d});