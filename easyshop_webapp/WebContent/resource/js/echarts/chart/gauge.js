define("echarts/chart/gauge",["require","../component/base","./base","../util/shape/GaugePointer","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","zrender/shape/Circle","zrender/shape/Sector","../config","../util/ecData","../util/accMath","zrender/tool/util","../chart"],function(v){function y(l,h,d,m,i){f.call(this,l,h,d,m,i),q.call(this),this.refresh(m)}var f=v("../component/base"),q=v("./base"),x=v("../util/shape/GaugePointer"),c=v("zrender/shape/Text"),z=v("zrender/shape/Line"),b=v("zrender/shape/Rectangle"),p=v("zrender/shape/Circle"),u=v("zrender/shape/Sector"),j=v("../config"),g=v("../util/ecData"),k=v("../util/accMath"),w=v("zrender/tool/util");return y.prototype={type:j.CHART_TYPE_GAUGE,_buildShape:function(){var d=this.series;this._paramsMap={};for(var a=0,h=d.length;h>a;a++){d[a].type===j.CHART_TYPE_GAUGE&&(d[a]=this.reformOption(d[a]),this.legendHoverLink=d[a].legendHoverLink||this.legendHoverLink,this._buildSingleGauge(a),this.buildMark(a))}this.addShapeList()},_buildSingleGauge:function(d){var a=this.series[d];this._paramsMap[d]={center:this.parseCenter(this.zr,a.center),radius:this.parseRadius(this.zr,a.radius),startAngle:a.startAngle.toFixed(2)-0,endAngle:a.endAngle.toFixed(2)-0},this._paramsMap[d].totalAngle=this._paramsMap[d].startAngle-this._paramsMap[d].endAngle,this._colorMap(d),this._buildAxisLine(d),this._buildSplitLine(d),this._buildAxisTick(d),this._buildAxisLabel(d),this._buildPointer(d),this._buildTitle(d),this._buildDetail(d)},_buildAxisLine:function(O){var D=this.series[O];if(D.axisLine.show){for(var I,L,R=D.min,H=D.max-R,E=this._paramsMap[O],F=E.center,K=E.startAngle,M=E.totalAngle,J=E.colorArray,A=D.axisLine.lineStyle,P=this.parsePercent(A.width,E.radius[1]),G=E.radius[1],Q=G-P,C=K,B=0,N=J.length;N>B;B++){L=K-M*(J[B][0]-R)/H,I=this._getSector(F,Q,G,L,C,J[B][1],A),C=L,I._animationAdd="r",g.set(I,"seriesIndex",O),g.set(I,"dataIndex",B),this.shapeList.push(I)}}},_buildSplitLine:function(N){var D=this.series[N];if(D.splitLine.show){for(var H,K,R,G=this._paramsMap[N],E=D.splitNumber,J=D.min,L=D.max-J,I=D.splitLine,s=this.parsePercent(I.length,G.radius[1]),A=I.lineStyle,O=A.color,F=G.center,P=G.startAngle*Math.PI/180,C=G.totalAngle*Math.PI/180,B=G.radius[1],M=B-s,Q=0;E>=Q;Q++){H=P-C/E*Q,K=Math.sin(H),R=Math.cos(H),this.shapeList.push(new z({zlevel:this._zlevelBase+1,hoverable:!1,style:{xStart:F[0]+R*B,yStart:F[1]-K*B,xEnd:F[0]+R*M,yEnd:F[1]-K*M,strokeColor:"auto"===O?this._getColor(N,J+L/E*Q):O,lineType:A.type,lineWidth:A.width,shadowColor:A.shadowColor,shadowBlur:A.shadowBlur,shadowOffsetX:A.shadowOffsetX,shadowOffsetY:A.shadowOffsetY}}))}}},_buildAxisTick:function(P){var D=this.series[P];if(D.axisTick.show){for(var H,L,T,G=this._paramsMap[P],E=D.splitNumber,J=D.min,M=D.max-J,I=D.axisTick,s=I.splitNumber,A=this.parsePercent(I.length,G.radius[1]),Q=I.lineStyle,F=Q.color,R=G.center,C=G.startAngle*Math.PI/180,B=G.totalAngle*Math.PI/180,N=G.radius[1],S=N-A,O=0,K=E*s;K>=O;O++){O%s!==0&&(H=C-B/K*O,L=Math.sin(H),T=Math.cos(H),this.shapeList.push(new z({zlevel:this._zlevelBase+1,hoverable:!1,style:{xStart:R[0]+T*N,yStart:R[1]-L*N,xEnd:R[0]+T*S,yEnd:R[1]-L*S,strokeColor:"auto"===F?this._getColor(P,J+M/K*O):F,lineType:Q.type,lineWidth:Q.width,shadowColor:Q.shadowColor,shadowBlur:Q.shadowBlur,shadowOffsetX:Q.shadowOffsetX,shadowOffsetY:Q.shadowOffsetY}})))}}},_buildAxisLabel:function(M){var C=this.series[M];if(C.axisLabel.show){for(var G,J,Q,D,E=C.splitNumber,I=C.min,K=C.max-I,H=C.axisLabel.textStyle,o=this.getFont(H),N=H.color,F=this._paramsMap[M],O=F.center,B=F.startAngle,A=F.totalAngle,L=F.radius[1]-this.parsePercent(C.splitLine.length,F.radius[1])-10,P=0;E>=P;P++){D=k.accAdd(I,k.accMul(k.accDiv(K,E),P)),G=B-A/E*P,J=Math.sin(G*Math.PI/180),Q=Math.cos(G*Math.PI/180),G=(G+360)%360,this.shapeList.push(new c({zlevel:this._zlevelBase+1,hoverable:!1,style:{x:O[0]+Q*L,y:O[1]-J*L,color:"auto"===N?this._getColor(M,D):N,text:this._getLabelText(C.axisLabel.formatter,D),textAlign:G>=110&&250>=G?"left":70>=G||G>=290?"right":"center",textBaseline:G>=10&&170>=G?"top":G>=190&&350>=G?"bottom":"middle",textFont:o,shadowColor:H.shadowColor,shadowBlur:H.shadowBlur,shadowOffsetX:H.shadowOffsetX,shadowOffsetY:H.shadowOffsetY}}))}}},_buildPointer:function(G){var I=this.series[G];if(I.pointer.show){var B=I.max-I.min,E=I.pointer,A=this._paramsMap[G],J=this.parsePercent(E.length,A.radius[1]),a=this.parsePercent(E.width,A.radius[1]),F=A.center,C=this._getValue(G);C=C<I.max?C:I.max;var D=(A.startAngle-A.totalAngle/B*(C-I.min))*Math.PI/180,H="auto"===E.color?this._getColor(G,C):E.color,l=new x({zlevel:this._zlevelBase+1,style:{x:F[0],y:F[1],r:J,startAngle:A.startAngle*Math.PI/180,angle:D,color:H,width:a,shadowColor:E.shadowColor,shadowBlur:E.shadowBlur,shadowOffsetX:E.shadowOffsetX,shadowOffsetY:E.shadowOffsetY},highlightStyle:{brushType:"fill",width:a>2?2:a/2,color:"#fff"}});g.pack(l,this.series[G],G,this.series[G].data[0],0,this.series[G].data[0].name,C),this.shapeList.push(l),this.shapeList.push(new p({zlevel:this._zlevelBase+2,hoverable:!1,style:{x:F[0],y:F[1],r:E.width/2.5,color:"#fff"}}))}},_buildTitle:function(F){var H=this.series[F];if(H.title.show){var o=H.data[0],D=null!=o.name?o.name:"";if(""!==D){var G=H.title,I=G.offsetCenter,d=G.textStyle,C=d.color,E=this._paramsMap[F],B=E.center[0]+this.parsePercent(I[0],E.radius[1]),A=E.center[1]+this.parsePercent(I[1],E.radius[1]);this.shapeList.push(new c({zlevel:this._zlevelBase+(Math.abs(B-E.center[0])+Math.abs(A-E.center[1]))<2*d.fontSize?2:1,hoverable:!1,style:{x:B,y:A,color:"auto"===C?this._getColor(F):C,text:D,textAlign:"center",textFont:this.getFont(d),shadowColor:d.shadowColor,shadowBlur:d.shadowBlur,shadowOffsetX:d.shadowOffsetX,shadowOffsetY:d.shadowOffsetY}}))}}},_buildDetail:function(F){var H=this.series[F];if(H.detail.show){var r=H.detail,D=r.offsetCenter,G=r.backgroundColor,d=r.textStyle,I=d.color,C=this._paramsMap[F],E=this._getValue(F),B=C.center[0]-r.width/2+this.parsePercent(D[0],C.radius[1]),A=C.center[1]+this.parsePercent(D[1],C.radius[1]);this.shapeList.push(new b({zlevel:this._zlevelBase+(Math.abs(B+r.width/2-C.center[0])+Math.abs(A+r.height/2-C.center[1]))<d.fontSize?2:1,hoverable:!1,style:{x:B,y:A,width:r.width,height:r.height,brushType:"both",color:"auto"===G?this._getColor(F,E):G,lineWidth:r.borderWidth,strokeColor:r.borderColor,shadowColor:r.shadowColor,shadowBlur:r.shadowBlur,shadowOffsetX:r.shadowOffsetX,shadowOffsetY:r.shadowOffsetY,text:this._getLabelText(r.formatter,E),textFont:this.getFont(d),textPosition:"inside",textColor:"auto"===I?this._getColor(F,E):I}}))}},_getValue:function(d){var a=this.series[d].data[0];return null!=a.value?a.value:a},_colorMap:function(B){var l=this.series[B],D=l.min,h=l.max-D,d=l.axisLine.lineStyle.color;d instanceof Array||(d=[[1,d]]);for(var C=[],m=0,A=d.length;A>m;m++){C.push([d[m][0]*h+D,d[m][1]])}this._paramsMap[B].colorArray=C},_getColor:function(m,l){null==l&&(l=this._getValue(m));for(var o=this._paramsMap[m].colorArray,h=0,d=o.length;d>h;h++){if(o[h][0]>=l){return o[h][1]}}return o[o.length-1][1]},_getSector:function(r,l,B,h,d,A,m){return new u({zlevel:this._zlevelBase,hoverable:!1,style:{x:r[0],y:r[1],r0:l,r:B,startAngle:h,endAngle:d,brushType:"fill",color:A,shadowColor:m.shadowColor,shadowBlur:m.shadowBlur,shadowOffsetX:m.shadowOffsetX,shadowOffsetY:m.shadowOffsetY}})},_getLabelText:function(d,a){if(d){if("function"==typeof d){return d.call(this.myChart,a)}if("string"==typeof d){return d.replace("{value}",a)}}return a},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()}},w.inherits(y,q),w.inherits(y,f),v("../chart").define("gauge",y),y}),define("echarts/util/shape/GaugePointer",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(c){function b(f){d.call(this,f)}var d=c("zrender/shape/Base"),a=c("zrender/tool/util");return b.prototype={type:"gauge-pointer",buildPath:function(k,h){var m=h.r,g=h.width,f=h.angle,l=h.x-Math.cos(f)*g*(g>=m/3?1:2),j=h.y+Math.sin(f)*g*(g>=m/3?1:2);f=h.angle-Math.PI/2,k.moveTo(l,j),k.lineTo(h.x+Math.cos(f)*g,h.y-Math.sin(f)*g),k.lineTo(h.x+Math.cos(h.angle)*m,h.y-Math.sin(h.angle)*m),k.lineTo(h.x-Math.cos(f)*g,h.y+Math.sin(f)*g),k.lineTo(l,j)},getRect:function(j){if(j.__rect){return j.__rect}var h=2*j.width,l=j.x,g=j.y,f=l+Math.cos(j.angle)*j.r,k=g-Math.sin(j.angle)*j.r;return j.__rect={x:Math.min(l,f)-h,y:Math.min(g,k)-h,width:Math.abs(l-f)+h,height:Math.abs(g-k)+h},j.__rect},isCover:c("./normalIsCover")},a.inherits(b,d),b});